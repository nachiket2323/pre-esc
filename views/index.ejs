<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Repository</title>
    <link rel="stylesheet" href="/styles.css">
</head>

<body>
    <div class="container">
        <h1>ğŸ“ File Repository</h1>
        <p class="breadcrumb"><a href="/">Home</a> / uploads</p>

        <div class="actions">
            <a href="/upload" class="btn">ğŸ“¤ Upload File</a>
            <a href="/admin" class="btn btn-secondary">ğŸ”’ Admin</a>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Size</th>
                    <th>Last Modified</th>
                </tr>
            </thead>
            <tbody>
                <% if (items.length===0) { %>
                    <tr>
                        <td colspan="3" class="empty">No folders yet. Upload a file to create your folder.</td>
                    </tr>
                    <% } else { %>
                        <% items.forEach(item=> { %>
                            <tr>
                                <td>
                                    <% if (item.isDir) { %>
                                        <div
                                            style="display: flex; align-items: center; justify-content: space-between;">
                                            <a href="/uploads/<%= item.name %>">ğŸ“ <%= item.name %></a>
                                            <% if (locals.isAdmin && item.name !=='admin' ) { %>
                                                <form action="/admin/delete-folder" method="POST"
                                                    onsubmit="return confirm('Are you sure you want to delete this folder and all its contents?');"
                                                    style="margin: 0;">
                                                    <input type="hidden" name="folderName" value="<%= item.name %>">
                                                    <button type="submit" class="btn-small"
                                                        style="background: #dc3545; color: white; border: none; border-radius: 3px; cursor: pointer; margin-left: 10px;">ğŸ—‘ï¸
                                                        Delete</button>
                                                </form>
                                                <% } %>
                                        </div>
                                        <% } else { %>
                                            ğŸ“„ <%= item.name %>
                                                <% } %>
                                </td>
                                <td>
                                    <%= item.size %>
                                </td>
                                <td>
                                    <%= item.modified %>
                                </td>
                            </tr>
                            <% }); %>
                                <% } %>
            </tbody>
        </table>

        <div class="curl-help">
            <h3>curl Commands</h3>
            <pre>curl https://pre-esc.onrender.com/
curl -F "file=@yourfile.txt" -F "username=yourname" https://pre-esc.onrender.com/upload</pre>
        </div>
    </div>
</body>

</html>